# Бот для отслеживания изменения цены криптовалюты

## Описание

Бот для отслеживания изменения цены криптовалюты с возможностью настройки параметров без перезапуска и управления группами через команды бота.

## Новые функции

### Динамическая настройка параметров
- Изменение порога изменения цены без перезапуска бота
- Настройки сохраняются в файле `settings.json`

### Управление группами через бота
- Добавление/удаление групп без редактирования .env файла
- Информация о группах хранится в файле `groups.json`
- Управление списком администраторов

## Команды бота

### Общие команды
- `/price` - Получить текущий курс криптовалюты

### Команды управления настройками (только для администраторов)
- `/set_threshold <значение>` - Установить порог изменения цены в процентах

### Команды управления группами (только для администраторов)
- `/add_group <id> <название>` - Добавить новую группу
- `/remove_group <id>` - Удалить группу
- `/list_groups` - Показать список всех групп
- `/add_admin <id>` - Добавить пользователя в список администраторов
- `/remove_admin <id>` - Удалить пользователя из списка администраторов

## Файлы конфигурации

### settings.json
```json
{
  "price_change_threshold": 15.0,
  "check_interval": 60
}
```

### groups.json
```json
{
  "admin_ids": [123456789],
  "group_chats": [
    {
      "id": -1001234567890,
      "name": "Основная группа"
    }
  ]
}
```

## Установка и запуск

1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Создайте файл `.env` на основе `.env.example` и заполните его:
   ```
   BOT_TOKEN=your_bot_token
   GROUP_CHAT_ID=your_group_chat_id
   ```

3. Запустите бота:
   ```
   python bot.py
   ```

## Использование

1. Для изменения порога изменения цены используйте команду `/set_threshold <значение>` (только для администраторов)
2. Для управления группами используйте команды `/add_group`, `/remove_group`, `/list_groups` (только для администраторов)
3. Для управления администраторами используйте команды `/add_admin`, `/remove_admin` (только для администраторов)
4. Для получения текущего курса используйте команду `/price` (доступна всем пользователям)

## Безопасность

- Все команды управления доступны только администраторам
- Список администраторов хранится в файле `groups.json`
- При первом запуске первый пользователь, который выполнит любую команду управления, автоматически становится администратором

## Первоначальная настройка

1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Создайте файл `.env` на основе `.env.example` и заполните его:
   ```
   BOT_TOKEN=your_bot_token
   GROUP_CHAT_ID=your_group_chat_id
   ```

3. Первый пользователь, который выполнит команду управления (например, `/set_threshold`), автоматически станет администратором

4. Запустите бота:
   ```
   python bot.py
   ```